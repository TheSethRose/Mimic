{
    "title": "Amazon - Get Recent Orders",
    "description": "Login to Amazon and extract recent order history",
    "may_require_mfa": true,
    "steps": [
        {
            "type": "setViewport",
            "width": 1280,
            "height": 800,
            "deviceScaleFactor": 1
        },
        {
            "type": "navigate",
            "url": "https://www.amazon.com/gp/css/order-history"
        },
        {
            "type": "click",
            "target": "main",
            "selectors": [
                ["#ap_email"],
                ["name/email"],
                ["aria/Email or mobile phone number"]
            ],
            "comment": "Enter Email"
        },
        {
            "type": "change",
            "value": "{{AMAZON_EMAIL}}",
            "selectors": [
                ["#ap_email"],
                ["name/email"]
            ]
        },
        {
            "type": "click",
            "target": "main",
            "selectors": [
                ["#continue"],
                ["text/Continue"]
            ]
        },
        {
            "type": "click",
            "target": "main",
            "selectors": [
                ["#ap_password"],
                ["name/password"],
                ["aria/Password"]
            ],
            "comment": "Enter Password"
        },
        {
            "type": "change",
            "value": "{{AMAZON_PASSWORD}}",
            "selectors": [
                ["#ap_password"],
                ["name/password"]
            ]
        },
        {
            "type": "click",
            "target": "main",
            "selectors": [
                ["#signInSubmit"],
                ["text/Sign-In"]
            ],
            "comment": "Submit Login"
        },
        {
            "type": "waitForElement",
            "selectors": [
                ["#yourOrders"],
                ["text/Your Orders"],
                [".order-card"]
            ],
            "timeout": 15000
        }
    ],
    "env_vars": {
        "AMAZON_EMAIL": "Amazon Email",
        "AMAZON_PASSWORD": "Amazon Password",
        "AMAZON_OTP_SECRET": "Optional: TOTP Secret for 2FA"
    },
    "extract_prompt": "Extract orders from the last 30 days. Return a JSON object with key 'orders' containing an array of objects, each with 'order_date' (string), 'order_number' (string), 'total' (string with $ amount), and 'items' (array of item name strings). Example: {\"orders\": [{\"order_date\": \"November 28, 2025\", \"order_number\": \"123-456-789\", \"total\": \"$45.99\", \"items\": [\"Item 1\", \"Item 2\"]}]}"
}
